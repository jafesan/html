<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu칤a Cervecera</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
        }
        #container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        h1 {
            color: #d35400; /* Un tono naranja m치s profundo */
        }
        #arrow-svg {
            width: 120px; /* Un poco m치s grande para mejor visibilidad */
            height: 120px;
            transition: transform 0.7s cubic-bezier(0.25, 1, 0.5, 1); /* Transici칩n m치s suave */
            margin: 25px 0;
            fill: #d35400; /* El color de la flecha */
        }
        #status {
            margin-top: 20px;
            font-style: italic;
            color: #666;
            min-height: 20px; /* Evita que la p치gina salte cuando cambia el texto */
        }
    </style>
</head>
<body>
    <div id="container">
        <h1>Where is the Genil? 游꽅</h1>
        <p>El camino hacia un buen colaca칤to.</p>

        <svg id="arrow-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2 L20 12 L14 12 L14 22 L10 22 L10 12 L4 12 Z"/>
        </svg>

        <p id="status">Obteniendo tu ubicaci칩n...</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const arrow = document.getElementById('arrow-svg');
            const status = document.getElementById('status');
            const target = {
                latitude: 37.9956906,
                longitude: -1.1224687
            };

            if (!navigator.geolocation) {
                status.textContent = 'La geolocalizaci칩n no es compatible con tu navegador.';
                return;
            }

            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            };

            const success = (position) => {
                const user = {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude
                };
                
                status.textContent = `춰La flecha apunta al colaca칤to!`;

                const bearing = calculateBearing(user, target);
                arrow.style.transform = `rotate(${bearing}deg)`;
            };

            const error = (err) => {
                console.warn(`ERROR(${err.code}): ${err.message}`);
                status.textContent = 'No se pudo obtener tu ubicaci칩n.';
            };

            navigator.geolocation.watchPosition(success, error, options);
        });

        function calculateBearing(start, end) {
            const toRadians = (deg) => deg * Math.PI / 180;
            const toDegrees = (rad) => rad * 180 / Math.PI;

            const startLat = toRadians(start.latitude);
            const startLng = toRadians(start.longitude);
            const destLat = toRadians(end.latitude);
            const destLng = toRadians(end.longitude);

            const y = Math.sin(destLng - startLng) * Math.cos(destLat);
            const x = Math.cos(startLat) * Math.sin(destLat) -
                      Math.sin(startLat) * Math.cos(destLat) * Math.cos(destLng - startLng);
            
            let brng = Math.atan2(y, x);
            brng = toDegrees(brng);
            return (brng + 360) % 360;
        }
    </script>
</body>
</html>
